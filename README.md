# LinkML Project Cookiecutter

A [Cookiecutter](https://cookiecutter.readthedocs.io/en/stable/) template for projects using [`Linkml`](https://github.com/linkml/linkml).


## Standard Protocol

### Step 1: Create a virtual environment

1: Create a Python virtual environment. You can read [this 
guide](https://realpython.com/python-virtual-environments-a-primer/) to learn more about them and how to create one.

After creating a virtual environment, it's as simple as:

1a: [install poetry](https://python-poetry.org/docs/):

`curl -sSL https://install.python-poetry.org | python3 -`

1b: [install cruft](https://cruft.github.io/cruft/):

`pip3 install cruft`


### Use cruft to generate a new project:

`cruft create https://github.com/linkml/linkml-project-cookiecutter`

Then follow the instructions on the screen, answering questions as best you can.

This kickstarts an interactive session where you declare the following:


- `project_name`: Name of the project, use kebab-case with no spaces. Suggestions:
    - `patient-observation-schema`
    - `sample-collection-metadata`
    - `resume-standard`
- `project_description`: Description of the project.
    - A single brief sentence is recommended
    - Can easily be modified later
- `full_name`: Your name
- `email`: your email
- `main_schema_class`:
    - This is used to generate an example schema which you can edit
    - The value of this field is ignored if this is a schemasheets project
    - You can always change this later
    - Examples: `Person`, `Observation`, `Sample`, `Entry`, `Gene`, `Event`
- `create_python_project`
    - If "Yes", set this up as a python project
    - Select Yes if you want to make data classes that can be used by developers
- `use_schemasheets`
    - If "Yes", set this to obtain your schema from [schemasheets](https://linkml.io/schemasheets)
- `google_sheet_id`
    - Ignore/use default value if answer to previous question was "No"
    - If you are using schemasheets then enter your google doc ID here
    - If you like you can leave the default value, and this will use the demo schema
- `google_sheet_tabs`
    - Ignore/use default value if not using schemasheets
    - If you are using schemasheets, enter a space-separated list of tabs
    - your tabs in your sheet MUST NOT have spaces in them
- `github_token_for_pypi_deployment`:
   - The github token name which aligns with your autogenerated PyPI token for making releases.
   - This helps automated releases to PyPI
   - This should be ignored if this is not a python project
   - Even if this is a python project, you can leave blank and fill in later

This will generate the project folder abiding by the template configuration specified by `linkml-project-cookiecutter` in the [`cookiecutter.json`](https://github.com/linkml/linkml-project-cookiecutter/blob/main/cookiecutter.json) file. 

This will generate the project folder very similar to what is mentioned in the [linkml-project-template](https://github.com/linkml/linkml-project-template) project.

See [linkml/linkml-project-cookiecutter](https://github.com/linkml/linkml-project-cookiecutter) for more docs.

### Setup the project

Change to the folder your generated project is in

type:

```bash
make setup
```

### Edit the schema

Edit the schema in the src folder

### Validate the schema

`make test`

### Test the documentation

`make server`

An look at the URL provided

### Create a github project

Go to https://github.com/new and follow the instructions

### Deploy documentation

`make deploy`

### Register the schema

See [How to register a schema](../faq/contributing)

## Alternative protocols

## Keeping your project up to date

In order to be up-to-date with the template, first check if there is a mismatch between the project's boilerplate code and the template by running:

```
cruft check
```

This indicates if there is a difference between the current project's boilerplate code and the latest version of the project template. If the project is up-to-date with the template:

```
SUCCESS: Good work! Project's cruft is up to date and as clean as possible :).
```

Otherwise, it will indicate that the project's boilerplate code is not up-to-date by the following:

```
FAILURE: Project's cruft is out of date! Run `cruft update` to clean this mess up.
```

For viewing the difference, run `cruft diff`. This shows the difference between the project's boilerplate code and the template's latest version.

After running `cruft update`, the project's boilerplate code will be updated to the latest version of the template.

